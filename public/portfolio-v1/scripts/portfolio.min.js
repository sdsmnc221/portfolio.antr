"use strict";var _createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function load(){var t=function(){function t(o){var i=this;_classCallCheck(this,t),this.grid=Macy({container:o,margin:{x:16,y:16},trueOrder:!0,mobileFirst:!0,columns:1,breakAt:{500:3,700:4}}),this.gridItems=[],Array.from(document.querySelectorAll(o+" .item")).forEach(function(t){i.gridItems.push(new e(t))}),this.enableGridRecalculate()}return _createClass(t,[{key:"enableGridRecalculate",value:function(){var t=this;this.recalculateGrid=function(e){t.grid.recalculate(!0),t.grid.reInit()},this.gridItems.forEach(function(e){e.gridItemFooter.footerToggleButton.addEventListener("click",t.recalculateGrid)})}}]),t}(),e=function(){function t(e){_classCallCheck(this,t),this.gridItem=e,this.initGridItem()}return _createClass(t,[{key:"initGridItem",value:function(){this.gridItemFooter=new o(this.gridItem.querySelector("footer"))}}]),t}(),o=function(){function t(e,o){_classCallCheck(this,t),this.grid=o,this.gridItemFooter=e,this.footerTags=Array.from(this.gridItemFooter.querySelectorAll("a")).filter(function(t){return!t.classList.contains("more")}),this.footerToggleButton=this.gridItemFooter.querySelector("a.more"),this.initGridItemFooter()}return _createClass(t,[{key:"initGridItemFooter",value:function(){this.enableToggleTags(),window.addEventListener("resize",this.enableToggleTags)}},{key:"enableDisplayToggleButton",value:function(){var t=this,e=document.body.clientWidth;this.footerW=this.gridItemFooter.offsetWidth-50,e>700?this.footerW=this.footerW/4:e>500&&(this.footerW=this.footerW/3),this.totalTagsW=0,this.footerTags.forEach(function(e){t.totalTagsW+=e.clientWidth}),this.totalTagsW>this.footerW?this.footerToggleButton.classList.remove("hidden"):this.footerToggleButton.classList.add("hidden")}},{key:"enableToggleTags",value:function(){var t=this;this.collapseTags=function(e){e.preventDefault(),t.gridItemFooter.style.height="2rem",t.footerToggleButton.classList.remove("less"),t.footerToggleButton.classList.add("more"),t.footerToggleButton.removeEventListener("click",t.collapseTags),t.footerToggleButton.addEventListener("click",t.expandTags)},this.expandTags=function(e){e.preventDefault(),t.tagsNb=t.footerTags.length,t.tagsNb/2>1?(t.gridItemFooter.style.height=2*Math.ceil(t.tagsNb/2)+"rem",t.footerToggleButton.classList.remove("more"),t.footerToggleButton.classList.add("less"),t.footerToggleButton.addEventListener("click",t.collapseTags)):t.tagsNb/2==1&&window.innerWidth<420?(t.gridItemFooter.style.height=2*t.tagsNb+"rem",t.footerToggleButton.classList.remove("more"),t.footerToggleButton.classList.add("less"),t.footerToggleButton.addEventListener("click",t.collapseTags)):t.footerToggleButton.classList.add("hidden")},this.enableDisplayToggleButton(),this.footerToggleButton.addEventListener("click",this.expandTags)}}]),t}();new t(".grid")}document.querySelector(".app").onload=load();